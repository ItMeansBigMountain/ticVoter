{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nvar fetchData = function fetchData() {\n  fetch('https://dumbstockapi.com/stock?exchanges=NYSE').then(function (response) {\n    return response.json();\n  }).catch(function (error) {\n    return console.error(error);\n  });\n};\n\nvar getArticlesFromApi = function getArticlesFromApi() {\n  var response, json;\n  return _regeneratorRuntime.async(function getArticlesFromApi$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return _regeneratorRuntime.awrap(fetch('https://dumbstockapi.com/stock?exchanges=NYSE'));\n\n        case 2:\n          response = _context.sent;\n          _context.next = 5;\n          return _regeneratorRuntime.awrap(response.json());\n\n        case 5:\n          json = _context.sent;\n          return _context.abrupt(\"return\", json);\n\n        case 7:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\n\nvar arr = fetchData();\nconsole.log(arr);\nconsole.log(\"here!!!!^^^^^^^^^^^^^^^^^\");\nvar lastItem = '';\nexport var fetch_rendered_data = function fetch_rendered_data(qty) {\n  return new Promise(function (resolve, reject) {\n    var newArr;\n    var lastItemIndex = arr.indexOf(lastItem);\n    if (lastItemIndex === arr.length - 1) return resolve('done');\n\n    if (!lastItem) {\n      newArr = _toConsumableArray(arr).slice(0, qty);\n      lastItem = _toConsumableArray(newArr).pop();\n    } else {\n      var newIndex = arr.indexOf(lastItem) + 1;\n      newArr = _toConsumableArray(arr).slice(newIndex, qty + newIndex);\n      lastItem = _toConsumableArray(newArr).pop();\n    }\n\n    setTimeout(function () {\n      resolve(newArr);\n    }, 1000);\n  });\n};","map":{"version":3,"sources":["C:/Users/affan/Desktop/JavaScript/REACT/projects/ticVoter/Dataserver.js"],"names":["fetchData","fetch","then","response","json","catch","error","console","getArticlesFromApi","arr","log","lastItem","fetch_rendered_data","qty","Promise","resolve","reject","newArr","lastItemIndex","indexOf","length","slice","pop","newIndex","setTimeout"],"mappings":";;;AAGA,IAAMA,SAAS,GAAG,SAAZA,SAAY,GAAM;AACtBC,EAAAA,KAAK,CAAC,+CAAD,CAAL,CACCC,IADD,CACM,UAACC,QAAD;AAAA,WAAcA,QAAQ,CAACC,IAAT,EAAd;AAAA,GADN,EAECC,KAFD,CAEO,UAACC,KAAD;AAAA,WAAWC,OAAO,CAACD,KAAR,CAAcA,KAAd,CAAX;AAAA,GAFP;AAGD,CAJD;;AAMA,IAAME,kBAAkB,GAAG,SAArBA,kBAAqB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CACJP,KAAK,CACxB,+CADwB,CADD;;AAAA;AACrBE,UAAAA,QADqB;AAAA;AAAA,2CAIRA,QAAQ,CAACC,IAAT,EAJQ;;AAAA;AAIrBA,UAAAA,IAJqB;AAAA,2CAKlBA,IALkB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAA3B;;AAaA,IAAIK,GAAG,GAAGT,SAAS,EAAnB;AACAO,OAAO,CAACG,GAAR,CAAYD,GAAZ;AACAF,OAAO,CAACG,GAAR,CAAY,2BAAZ;AAGA,IAAIC,QAAQ,GAAG,EAAf;AACA,OAAO,IAAMC,mBAAmB,GAAG,SAAtBA,mBAAsB,CAAAC,GAAG;AAAA,SACpC,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AAC/B,QAAIC,MAAJ;AACA,QAAMC,aAAa,GAAGT,GAAG,CAACU,OAAJ,CAAYR,QAAZ,CAAtB;AACA,QAAIO,aAAa,KAAKT,GAAG,CAACW,MAAJ,GAAa,CAAnC,EAAsC,OAAOL,OAAO,CAAC,MAAD,CAAd;;AAEtC,QAAI,CAACJ,QAAL,EAAe;AACbM,MAAAA,MAAM,GAAG,mBAAIR,GAAJ,EAASY,KAAT,CAAe,CAAf,EAAkBR,GAAlB,CAAT;AACAF,MAAAA,QAAQ,GAAG,mBAAIM,MAAJ,EAAYK,GAAZ,EAAX;AACD,KAHD,MAGO;AACL,UAAMC,QAAQ,GAAGd,GAAG,CAACU,OAAJ,CAAYR,QAAZ,IAAwB,CAAzC;AACAM,MAAAA,MAAM,GAAG,mBAAIR,GAAJ,EAASY,KAAT,CAAeE,QAAf,EAAyBV,GAAG,GAAGU,QAA/B,CAAT;AACAZ,MAAAA,QAAQ,GAAG,mBAAIM,MAAJ,EAAYK,GAAZ,EAAX;AACD;;AACDE,IAAAA,UAAU,CAAC,YAAM;AACfT,MAAAA,OAAO,CAACE,MAAD,CAAP;AACD,KAFS,EAEP,IAFO,CAAV;AAGD,GAhBD,CADoC;AAAA,CAA/B","sourcesContent":["\r\n\r\n// HTTP REQUEST\r\nconst fetchData = () => {\r\n  fetch('https://dumbstockapi.com/stock?exchanges=NYSE')\r\n  .then((response) => response.json())\r\n  .catch((error) => console.error(error))\r\n}\r\n\r\nconst getArticlesFromApi = async () => {\r\n  let response = await fetch(\r\n    'https://dumbstockapi.com/stock?exchanges=NYSE'\r\n  );\r\n  let json = await response.json();\r\n  return json ;\r\n}\r\n\r\n\r\n\r\n\r\n\r\n// splits fetched json data array into chunks that are going to be requested whenever user scrolls\r\nlet arr = fetchData()\r\nconsole.log(arr)\r\nconsole.log(\"here!!!!^^^^^^^^^^^^^^^^^\")\r\n\r\n\r\nlet lastItem = '';\r\nexport const fetch_rendered_data = qty =>\r\n  new Promise((resolve, reject) => {\r\n    let newArr;\r\n    const lastItemIndex = arr.indexOf(lastItem);\r\n    if (lastItemIndex === arr.length - 1) return resolve('done');\r\n\r\n    if (!lastItem) {\r\n      newArr = [...arr].slice(0, qty);\r\n      lastItem = [...newArr].pop();\r\n    } else {\r\n      const newIndex = arr.indexOf(lastItem) + 1;\r\n      newArr = [...arr].slice(newIndex, qty + newIndex);\r\n      lastItem = [...newArr].pop();\r\n    }\r\n    setTimeout(() => {\r\n      resolve(newArr);\r\n    }, 1000);\r\n  });"]},"metadata":{},"sourceType":"module"}